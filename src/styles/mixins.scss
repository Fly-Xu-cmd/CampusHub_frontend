/**
 * 样式混合器
 * 用于定义可复用的样式片段和响应式布局工具
 */

// 导入变量
@use "@/styles/variables.scss" as *;

/**
 * 响应式布局混合器
 * @param {string} $breakpoint - 断点类型：mobile, tablet, desktop, large
 */
@mixin responsive($breakpoint) {
  @if $breakpoint == "mobile" {
    @media (max-width: $breakpoint-mobile) {
      @content;
    }
  } @else if $breakpoint == "tablet" {
    @media (min-width: $breakpoint-tablet) and (max-width: calc(#{$breakpoint-desktop} - 1px)) {
      @content;
    }
  } @else if $breakpoint == "desktop" {
    @media (min-width: $breakpoint-desktop) and (max-width: calc(#{$breakpoint-large} - 1px)) {
      @content;
    }
  } @else if $breakpoint == "large" {
    @media (min-width: $breakpoint-large) {
      @content;
    }
  }
}

/**
 * 弹性布局混合器
 * @param {string} $direction - 方向：row, column
 * @param {string} $justify - 主轴对齐：flex-start, center, flex-end, space-between, space-around
 * @param {string} $align - 交叉轴对齐：flex-start, center, flex-end, stretch
 */
@mixin flex($direction: row, $justify: flex-start, $align: stretch) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
}

/**
 * 卡片样式混合器
 */
@mixin card {
  background-color: $surface-color;
  border-radius: $border-radius-md;
  box-shadow: $shadow-sm;
  padding: $spacing-md;
  border: 1px solid $border-color;
}

/**
 * 按钮样式混合器
 * @param {string} $color - 按钮颜色
 */
@mixin button($color: $primary-color) {
  display: inline-block;
  padding: $spacing-sm $spacing-md;
  background-color: $color;
  color: $text-light;
  border: none;
  border-radius: $border-radius-sm;
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  cursor: pointer;
  transition: background-color 0.3s ease;

  &:hover {
    background-color: darken($color, 10%);
  }

  &:active {
    background-color: darken($color, 15%);
  }

  &:disabled {
    background-color: $border-color;
    cursor: not-allowed;
  }
}

/**
 * 文本截断混合器
 * @param {number} $lines - 显示行数
 */
@mixin truncate($lines: 1) {
  @if $lines == 1 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

/**
 * 清除浮动混合器
 */
@mixin clearfix {
  &::after {
    content: "";
    display: table;
    clear: both;
  }
}

/**
 * 平台特定样式混合器
 * @param {string} $platform - 平台类型：h5, mp-weixin, app-plus
 */
@mixin platform-specific($platform) {
  @if $platform == "h5" {
    /* #ifdef H5 */
    @content;
    /* #endif */
  } @else if $platform == "mp-weixin" {
    /* #ifdef MP-WEIXIN */
    @content;
    /* #endif */
  } @else if $platform == "app-plus" {
    /* #ifdef APP-PLUS */
    @content;
    /* #endif */
  }
}
